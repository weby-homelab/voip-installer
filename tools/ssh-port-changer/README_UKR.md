# üõ°Ô∏è SSH Port Changer `v1.0` (UKR)

> **–ë–µ–∑–ø–µ—á–Ω–∞ –∑–º—ñ–Ω–∞ –ø–æ—Ä—Ç—É SSH –Ω–∞ —Å—É—á–∞—Å–Ω–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö Ubuntu –±–µ–∑ —Ä–∏–∑–∏–∫—É –≤—Ç—Ä–∞—Ç–∏ –¥–æ—Å—Ç—É–ø—É.**

[![Ubuntu](https://img.shields.io/badge/Ubuntu-24.04%2B-E95420?logo=ubuntu&style=flat-square)](https://ubuntu.com/)
[![Bash](https://img.shields.io/badge/Language-Bash-4EAA25?logo=gnu-bash&style=flat-square)](https://www.gnu.org/software/bash/)
[![License](https://img.shields.io/badge/License-MIT-blue?style=flat-square)](LICENSE)

---

## üöÄ –ß–æ–º—É —Ü–µ–π —Å–∫—Ä–∏–ø—Ç?

–í **Ubuntu 24.04 LTS** —Ç–∞ –Ω–æ–≤—ñ—à–µ –∑–º—ñ–Ω–∞ –ø–æ—Ä—Ç—É SSH –±—ñ–ª—å—à–µ –Ω–µ –æ–±–º–µ–∂—É—î—Ç—å—Å—è –ø—Ä–æ—Å—Ç–∏–º —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è–º `/etc/ssh/sshd_config`. Canonical –ø–µ—Ä–µ–π—à–ª–∞ –Ω–∞ **Systemd Socket Activation**, —â–æ –æ–∑–Ω–∞—á–∞—î, —â–æ —Å–∞–º–µ `ssh.socket` –∫–µ—Ä—É—î –ø–æ—Ä—Ç–æ–º –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è, —ñ–≥–Ω–æ—Ä—É—é—á–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤–∞—à–æ–≥–æ –∫–æ–Ω—Ñ—ñ–≥-—Ñ–∞–π–ª—É.

–¶–µ–π —Å–∫—Ä–∏–ø—Ç –±–µ—Ä–µ –≤—Å—é —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –Ω–∞ —Å–µ–±–µ, –∑–∞–±–µ–∑–ø–µ—á—É—é—á–∏ **–±–µ–∑–ø–µ—á–Ω—É –∑–º—ñ–Ω—É –ø–æ—Ä—Ç—É –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—é**.

### ‚ú® –ö–ª—é—á–æ–≤—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

*   **üõ°Ô∏è –í—ñ–¥–∫–∞–∑–æ—Å—Ç—ñ–π–∫–∏–π –ø–µ—Ä–µ—Ö—ñ–¥:** –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É—î —Å–µ—Ä–≤–µ—Ä —Ç–∞–∫, —â–æ–± –≤—ñ–Ω —Å–ª—É—Ö–∞–≤ **–û–ë–ò–î–í–ê** –ø–æ—Ä—Ç–∏ (—Å—Ç–∞—Ä–∏–π —Ç–∞ –Ω–æ–≤–∏–π) –æ–¥–Ω–æ—á–∞—Å–Ω–æ –ø—ñ–¥ —á–∞—Å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è.
*   **üîå Systemd Socket Override:** –ö–æ—Ä–µ–∫—Ç–Ω–æ —Å—Ç–≤–æ—Ä—é—î —Ñ–∞–π–ª–∏ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è `listen.conf` –¥–ª—è –ø—Ä–∏–≤'—è–∑–∫–∏ —Å–æ–∫–µ—Ç—ñ–≤.
*   **üß± –ê–≤—Ç–æ-–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Firewall:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î —Ç–∞ –æ–Ω–æ–≤–ª—é—î **NFTables** –∞–±–æ **UFW**.
*   **üö´ –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è:** –°–∫—Ä–∏–ø—Ç –ø—Ä–∏–∑—É–ø–∏–Ω—è—î—Ç—å—Å—è —Ç–∞ –≤–∏–º–∞–≥–∞—î, —â–æ–± –≤–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∏–ª–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –≤ –Ω–æ–≤–æ–º—É –≤—ñ–∫–Ω—ñ, –ø–µ—Ä—à –Ω—ñ–∂ –∑–∞–∫—Ä–∏—Ç–∏ —Å—Ç–∞—Ä–∏–π –ø–æ—Ä—Ç.
*   **ü§ñ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Fail2Ban:** –ú–∏—Ç—Ç—î–≤–æ –æ–Ω–æ–≤–ª—é—î –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞—Ö–∏—Å—Ç—É (jails) –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –Ω–æ–≤–æ–≥–æ –ø–æ—Ä—Ç—É.

---

## ‚ö° –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ü–µ –Ω–∞ –≤–∞—à–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ –ø—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º `root`:

```bash
# –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ç–∞ –∑—Ä–æ–±–∏—Ç–∏ –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏–º
curl -fsSL https://raw.githubusercontent.com/weby-homelab/voip-installer/main/tools/ssh-port-changer/change_port.sh -o change_port.sh
chmod +x change_port.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ (–∑–∞–º—ñ–Ω—ñ—Ç—å 54322 –Ω–∞ –≤–∞—à –ø–æ—Ä—Ç)
sudo ./change_port.sh 54322
```

---

## üìñ –î–µ—Ç–∞–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### 1. –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —Ä–µ–∂–∏–º
–ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤, —â–æ–± —Å–∫—Ä–∏–ø—Ç —Å–∞–º –∑–∞–ø–∏—Ç–∞–≤ –ø–æ—Ä—Ç:
```bash
./change_port.sh
# > Enter new SSH port (1024-65535):
```

### 2. –ù–µ—ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —Ä–µ–∂–∏–º
–ü–µ—Ä–µ–¥–∞–π—Ç–µ –ø–æ—Ä—Ç —è–∫ –∞—Ä–≥—É–º–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó:
```bash
./change_port.sh 2222
```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ (–ö—Ä–∏—Ç–∏—á–Ω–∏–π –∫—Ä–æ–∫)
–°–∫—Ä–∏–ø—Ç –∑—É–ø–∏–Ω–∏—Ç—å—Å—è –Ω–∞ —Ü—å–æ–º—É –µ—Ç–∞–ø—ñ:

> **–ö–†–ò–¢–ò–ß–ù–û: –ù–ï –ó–ê–ö–†–ò–í–ê–ô–¢–ï –ü–û–¢–û–ß–ù–£ –°–ï–°–Ü–Æ!**
> –í—ñ–¥–∫—Ä–∏–π—Ç–µ –ù–û–í–ï –≤—ñ–∫–Ω–æ —Ç–µ—Ä–º—ñ–Ω–∞–ª—É —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:
> `ssh -p 54322 root@<–≤–∞—à–∞-ip>`

**–¢—ñ–ª—å–∫–∏** –ø—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –≤–∏ —É—Å–ø—ñ—à–Ω–æ —É–≤—ñ–π—à–ª–∏ —á–µ—Ä–µ–∑ –Ω–æ–≤–∏–π –ø–æ—Ä—Ç –≤ –æ–∫—Ä–µ–º–æ–º—É –≤—ñ–∫–Ω—ñ, –≤–≤–µ–¥—ñ—Ç—å `yes` —É —Å–∫—Ä–∏–ø—Ç—ñ, —â–æ–± –∑–∞–≤–µ—Ä—à–∏—Ç–∏ –∑–º—ñ–Ω–∏ (–∑–∞–∫—Ä–∏—Ç–∏ –ø–æ—Ä—Ç 22).

---

## üîß –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

1.  **–í–∞–ª—ñ–¥–∞—Ü—ñ—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ root —Ç–∞ –≤–µ—Ä—Å—ñ—ó –û–°.
2.  **Firewall:** –ù–µ–≥–∞–π–Ω–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –¥–æ–∑–≤–æ–ª—è—é—á–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ù–û–í–û–ì–û –ø–æ—Ä—Ç—É.
3.  **Socket Dual-Bind:** –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è `ssh.socket` –Ω–∞ –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è –ø–æ—Ä—Ç—ñ–≤ 22 –¢–ê –Ω–æ–≤–æ–≥–æ –ø–æ—Ä—Ç—É.
4.  **–û—á—ñ–∫—É–≤–∞–Ω–Ω—è:** –ü–∞—É–∑–∞ –¥–ª—è —Ä—É—á–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º.
5.  **–û—á–∏—â–µ–Ω–Ω—è:**
    *   –í–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ—Ä—Ç—É 22 –∑ `ssh.socket`.
    *   –û–Ω–æ–≤–ª–µ–Ω–Ω—è `sshd_config` (–¥–ª—è —É–∑–≥–æ–¥–∂–µ–Ω–æ—Å—Ç—ñ –ø—Ä–æ—Ç–æ–∫–æ–ª—ñ–≤).
    *   –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç—é—Ä–µ–º `fail2ban`.
    *   –í–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ—Ä—Ç—É 22 –∑ –ø—Ä–∞–≤–∏–ª Firewall.

---

## üì¶ –°—É–º—ñ—Å–Ω—ñ—Å—Ç—å

| –û–° | –í–µ—Ä—Å—ñ—è | –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ | –ü—Ä–∏–º—ñ—Ç–∫–∞ |
| :--- | :--- | :--- | :--- |
| **Ubuntu** | 24.04 LTS (Noble) | ‚úÖ –ü–æ–≤–Ω–∞ | –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ª–æ–≥—ñ–∫—É `ssh.socket` |
| **Ubuntu** | 22.04 LTS | ‚ö†Ô∏è –ù–µ —Ç–µ—Å—Ç–æ–≤–∞–Ω–æ | –ú–∞—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏, —è–∫—â–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ socket activation |
| **Debian** | 12 (Bookworm) | ‚ùå –ù–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è | –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π `sshd_config` |

---

## ü§ù –£—á–∞—Å—Ç—å —É —Ä–æ–∑—Ä–æ–±—Ü—ñ

–ó–Ω–∞–π—à–ª–∏ –±–∞–≥? –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –≤–∫–ª–∞–¥–∫—É [Issues](https://github.com/weby-homelab/voip-installer/issues).
–ü—É–ª-—Ä–µ–∫–≤–µ—Å—Ç–∏ –≤—ñ—Ç–∞—é—Ç—å—Å—è!

**–õ—ñ—Ü–µ–Ω–∑—ñ—è:** MIT
